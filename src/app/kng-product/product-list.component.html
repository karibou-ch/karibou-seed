<div class="product-dialog " #dialog (scroll)="onScroll($event)" >
  <div class="product-backdrop"></div>
  <div class="product-dialog__surface" *ngIf="isReady">
    <div class="category-wide" >

      <!-- CLOSE -->
      <button (click)="onClose(true)" class="close" >
        <span class="material-symbols-outlined size-large">arrow_back</span>
      </button>


      <!-- TITLE -->
      <div class="banner" >
        <h1 [innerHtml]="category.current.name"></h1>
        <h2 [innerHtml]="category.current.description"></h2>  
      </div>

      <div class="subscription hide" *ngIf="options.subscription">
        <div class="label">
          Activer pour recevoir les articles en commandes r√©currentes {{activeSubscription}}
          <div class="sublabel"><span [innerHtml]="label_souscription"></span></div>
        </div>
        <label class="switch">
          <input type="checkbox" (click)="toggleSubscription()" [(ngModel)]="activeSubscription" ngDefaultControl>
          <span class="slider">
           <svg class="slider-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="presentation"><path fill="none" d="m4 16.5 8 8 16-16"></path></svg> 
          </span>
        </label>

      </div>
      
      <!-- SUBSCRITION OPTIONS -->
      <!-- <kng-subscription-option *ngIf="options.subscription"></kng-subscription-option> -->


      <!-- CATEGORY -->
      <!-- FIXED SIZE -->
      <div class="toolbox " [class.extend-all]="showSubCategory"  [class.exited]="scrollDirection < -25 || scrollDirection > 25 || !scrollDirection" [hidden]="options.subscription">
        <div class="show-more hide-lg" (click)="onMOnbileShowMore()" >
          <span class="material-symbols-outlined size-medium">density_small</span>
        </div>
        <ul  #subcategory>
          <li class="kng-chip" (click)="scrollTo($event,child.name)"
                    [id]="'child'+j"                    
                    [class.selected]="child.name == filterChild"
                    *ngFor="let child of getChildCategory(category.current);trackBy:trackerCategories;let j=index">
            <span>{{child.name}}</span>
          </li>
        </ul>        
      </div>

      <!-- VENDORS-->
      <div class="vendor" >
      </div>


    </div>

    <!-- FURTHER -->
    <div class="further-product-container mdc-layout-grid" >
      <kng-product-grouped-list class="kng-layout-card"        
      *ngIf="products.length"
        alphasort="true"
        showSection="true"
        [displaySubscription]="activeSubscription"
        [config]="config" 
        [user]="user"         
        [scrollContainer]="getDialog()"
        [scrollToSlug]="scrollToCategory"
        [contentCategories]="getChildCategory(category.current)" 
        [contentProducts]="getProducts()"
        (currentCategory)="filterChild=$event"
        (direction)="scrollDirection=$event"> </kng-product-grouped-list>
 
  
  </div>
</div>
