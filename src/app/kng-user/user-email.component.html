<div class="container">
  <!-- <h3 >Modifier votre mot de passe</h3>
  <h4 >{{user.display()}}</h4> -->
  <p class="block-info" [innerHtml]="$i18n[locale].user_nlpd">

  <form [formGroup]="$profile" (submit)="onChange()">
    <fieldset>
      <legend>Vos informations privées</legend>

      <div class="groupfield">
        <input class="form__field" type="text" [placeholder]="$i18n[locale].user_name" formControlName="name" [ngModel]="user.name.familyName" />
        <label class="form__label">{{$i18n[locale].user_name}}</label>
      </div>

      <div class="groupfield">
        <input class="form__field" type="text" [placeholder]="$i18n[locale].user_firstname" formControlName="forname" [ngModel]="user.name.givenName" />
        <label class="form__label">{{$i18n[locale].user_firstname}}</label>
      </div>

      <div class="groupfield">
        <input class="form__field" type="text" [placeholder]="$i18n[locale].user_phone" formControlName="phone" [ngModel]="phone" />
        <label class="form__label">{{$i18n[locale].user_phone}}</label>
      </div>

      <div class="groupfield">
        <input class="form__field" type="email" [placeholder]="$i18n[locale].user_email" formControlName="email" [ngModel]="user.email.address" />
        <label class="form__label">{{$i18n[locale].user_email}}</label>
      </div>

      <div class="groupfield">
        <input class="form__field" type="password" [placeholder]="$i18n[locale].user_confirm_password" formControlName="password" />
        <label class="form__label">{{$i18n[locale].user_confirm_password}}</label>
      </div>

      <div class="bottom">
        <button class="button cta" [disabled]="!$profile.valid">
          <span class="material-symbols-outlined">account_circle</span>
          <span >{{$i18n[locale].action_save}}</span>
        </button>
      </div>
    </fieldset>
  </form>

  <div class="form">
    <fieldset>
      <legend>Vos adresses</legend>

      <ul class="elem">
        <li *ngFor="let address of user.addresses;let idx=index">
            <div class="name">{{address.name}}</div>
            <div class="street">{{address.streetAdress}}</div>
            <div class="note"><span class="bold">info:</span> {{address.note}}</div>
        </li>
      </ul>


      <button class="button profile" [routerLink]="['/store/' + store + '/home/me/login-or-address']">
        {{$i18n[locale].user_address_add}}
      </button>
    </fieldset>
  </div>

  <div class="form">
    <fieldset>
      <legend>Vos méthodes de paiement</legend>

      <ul class="elem">
        <li *ngFor="let payment of user.payments;let idx=index">

          <div class="name" >
            {{payment.issuer}} {{payment.expiryToDate()|date:'MM/y'}}
            <span class="label">{{payment.number||payment.last4}}</span>
          </div>
          <div class="error" [hidden]="!payment.error" [class.invalid]="!payment.isValid()">{{payment.error}}</div>
        </li>
      </ul>


      <button class="button profile" [routerLink]="['/store/' + store + '/home/me/login-or-payment']">
        {{$i18n[locale].user_payment_add}}
      </button>

    </fieldset>

  </div>

</div>