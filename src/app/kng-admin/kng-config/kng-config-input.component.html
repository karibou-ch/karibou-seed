<div [ngClass]="clazz + ' input-row-'+format" [ngSwitch]="format">

  <!-- CHECKBOX -->
  <ng-container *ngSwitchCase="'checkbox'">
    <wa-checkbox size="small" [checked]="value" (wa-change)="value = $any($event.target).checked">
      {{label}}
    </wa-checkbox>
  </ng-container>

  <!-- TEXT -->
  <ng-container *ngSwitchCase="'text'">
    <wa-input size="small" 
              [label]="label" 
              [value]="value" 
              (wa-input)="value = $any($event.target).value"
              [disabled]="disabled">
      <span slot="prefix" class="material-symbols-outlined">folder_special</span>
    </wa-input>
    <wa-checkbox *ngIf="withCheck" size="small" [checked]="checked" (wa-change)="onCheck($any($event.target).checked)"></wa-checkbox>
    <ng-content></ng-content>
  </ng-container>

  <!-- AREA -->
  <ng-container *ngSwitchCase="'area'">
    <wa-textarea size="small" 
                 [label]="label" 
                 [value]="value" 
                 (wa-input)="value = $any($event.target).value"
                 resize="auto"
                 rows="3"
                 [disabled]="disabled">
    </wa-textarea>
    <wa-checkbox *ngIf="withCheck" size="small" [checked]="checked" (wa-change)="onCheck($any($event.target).checked)"></wa-checkbox>
  </ng-container>

  <!-- IMAGE -->
  <ng-container *ngSwitchCase="'image'">
    <div class="image-field">
      <label class="field-label">{{label}}</label>
      <div class="image-container">
        <div class="image-preview" *ngIf="value">
          <img [src]="value">
          <wa-button size="small" appearance="text" (click)="value=null">
            <span class="material-symbols-outlined">delete</span>
          </wa-button>
        </div>
        <ngx-uploadcare-widget 
          [imagesOnly]="true"
          [value]="value"
          [validator]="ucValidator"
          (on-upload-complete)="onUpload($event)"
          (on-dialog-open)="onDialogOpen($event)"
          [public-key]="config?.shared?.keys?.pubUpcare">
        </ngx-uploadcare-widget>
      </div>
    </div>
  </ng-container>

  <!-- LANG -->
  <ng-container *ngSwitchCase="'lang'">
    <div class="lang-selector">
      <span class="lang-label">i18n</span>
      <div class="lang-buttons">
        <wa-button size="small" [appearance]="i18n.locale=='en' ? 'filled' : 'outlined'" (click)="onLang($event,'en')">EN</wa-button>
        <wa-button size="small" [appearance]="i18n.locale=='fr' ? 'filled' : 'outlined'" (click)="onLang($event,'fr')">FR</wa-button>
      </div>
    </div>
  </ng-container>

  <!-- GEO -->
  <ng-container *ngSwitchCase="'geo'">
    <div class="geo-field">
      <span class="material-symbols-outlined field-icon">map</span>
      <label class="field-label">{{label}}</label>
      <div class="geo-preview">
        <img [src]="getStaticMap()">
      </div>
    </div>
  </ng-container>

  <!-- MENU (navigation admin - now in sidebar) -->
  <ng-container *ngSwitchCase="'menu'">
    <wa-callout variant="primary">
      <span class="material-symbols-outlined" slot="icon">info</span>
      Navigation disponible dans le menu latéral
    </wa-callout>
  </ng-container>

  <!-- HUB (hub selector - now in sidebar) -->
  <ng-container *ngSwitchCase="'hub'">
    <wa-callout variant="primary">
      <span class="material-symbols-outlined" slot="icon">info</span>
      Sélection du Hub disponible dans le menu latéral
    </wa-callout>
  </ng-container>

</div>
